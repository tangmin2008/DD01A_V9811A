C51 COMPILER V9.01   DRV_TMR                                                               04/08/2019 10:12:09 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE DRV_TMR
OBJECT MODULE PLACED IN .\Drv_TMR.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\C_Source\S1_HardDrv\V9811A_MCU\Drv_TMR.c LARGE BROWSE INCDIR(..\C_Source
                    -\S0_System;..\C_Source\S1_HardDrv;..\C_Source\S2_MyLib;..\C_Source\S3_ApiPlat;..\C_Source\S4_ApiUser;..\C_Source\S5_ApiP
                    -rotocol;..\C_Source\S6_MyIncludes;..\C_Source\S1_HardDrv\V9811A_EMU;..\C_Source\S1_HardDrv\V9811A_MCU;..\C_Source\S1_Har
                    -dDrv\E2P_24CXXX) DEBUG OBJECTEXTEND PRINT(.\Drv_TMR.lst) OBJECT(.\Drv_TMR.obj)

line level    source

   1          /*
   2          *****************Copyright (c)*************************************
   3          **      Hangzhou Xili Watthour Meter Manufacture Co., Ltd. 
   4          **--------------file info--------------------------------------------
   5          **name                  : Drv_TMR.c
   6          **Author                : maji
   7          **date                  : 2016-04-20 
   8          **description   : MCU tmr模块的硬件驱动C代码
   9          **note                  : V9811A ，MERTER FOR DL03C
  10          **--------------------Version History -------------------------------------
  11          ** NO. Date         Ver      By         Description 
  12          **==============================================================
  13          ** 1   2016-04-26   v01.00   sosomj     1. frist version                             
  14          **
  15          **==============================================================
  16          */
  17          
  18          #include <MyIncludes_H.h>
  19          
  20          
  21          
  22          
  23          /*******************************************************************************************
  24          ** 函数名称: Start_Timer
  25          ** 功能描述: 启动Timer
  26          ** 入口参数: 无
  27          ** 出口参数: 无
  28          ** 说明    : 
  29          *******************************************************************************************/
  30          void Start_Timer(void)
  31          {
  32   1              TR0 = 1;                  //开启TIMER0  //
  33   1              ET0 = 1;
  34   1      
  35   1              TR2 = 1;
  36   1              ET2 = 1;
  37   1      
  38   1      }
  39          void Start_Timer1(void)
  40          {
  41   1              TR1 = 1;
  42   1              ET1 = 1;                         //开启TIMER1
  43   1      }
  44          /*******************************************************************************************
  45          ** 函数名称: Stop_Timer
  46          ** 功能描述: 关闭Timer
  47          ** 入口参数: 无
  48          ** 出口参数: 无
  49          ** 说明    : 
  50          *******************************************************************************************/
  51          void Stop_Timer(void)
  52          {
C51 COMPILER V9.01   DRV_TMR                                                               04/08/2019 10:12:09 PAGE 2   

  53   1         TR0 = 0;                                                        //关闭TIMER0  //
  54   1         ET0 = 0;
  55   1      
  56   1      }
  57          
  58          /*******************************************************************************************
  59          ** 函数名称: Init_Timer
  60          ** 功能描述: 初始化TIMER
  61          ** 入口参数: 无
  62          ** 出口参数: 无
  63          ** 说明    : 
  64          *******************************************************************************************/
  65          void Init_Timer(void)
  66          {       
  67   1      
  68   1      //    TMOD = 0x01;           // 工作在模式1
  69   1              TMOD = 0x11;        //Timer0和Timer1工作在模式1
  70   1              CKCON|=BIT3;        // Timer0时钟源clk
  71   1              CKCON&=~BIT4;           //Timer1时钟源clk/12
  72   1              CKCON|=BIT5;        // Timer2时钟源clk 
  73   1              TL0  = LOBYTE(T0_10MS_CNT);         //10ms Timer0
  74   1              TH0  = HIBYTE(T0_10MS_CNT);
  75   1              TL1      = LOBYTE(T1_80MS_CNT);    //80ms  Timer1
  76   1              TH1      = HIBYTE(T1_80MS_CNT);
  77   1              TL2  = LOBYTE(T2_01MS_CNT); 
  78   1              TH2      = HIBYTE(T2_01MS_CNT);    //10ms  Timer2
  79   1          Start_Timer();
  80   1      }
  81          
  82          
  83          /*******************************************************************************************
  84          **    END
  85          *******************************************************************************************/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     52    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
